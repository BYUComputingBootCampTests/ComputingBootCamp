---
layout: page
toc: true
title: Documentation + Sphinx
slug: sphinx
type: development
order: 11
---

## Lecture Video
On May 19, 2021 Prof Wirthlin discussed how to set up Sphinx and how to document code. The video is embedded below. 

<iframe width="800" height="600" allow="fullscreen" src="https://www.youtube.com/embed/hOC9g8ZV5VA"> </iframe>

## Introduction and Installing Sphinx

Sphinx is a very powerful tool that allows you to automatically generate documentation for your code. It works with a verity of different coding langueages (not just python) and also allows us to generate html websites from restructured text.

You can install sphinx using either the system package manager or pip. You can also try installing sphinx within a conda env. The commands for each of these options can be found bellow:
### System Package Manager

``sudo apt-get install python3-sphinx``

### Pip

``pip install sphinx``

### Conda

``conda install sphinx``


After installing sphinx create an empty directory. To prepare the directory to be used by sphinx run the following command:
``sphinx-quickstart <path to the directory you created>``

You will be asked several questions about how you want your documentation to be set up. You can chose the default option for most of the questions by just hitting enter but you will want to specify the name of your project and the name of the author. Also be sure to type ``y`` when asked if you want to use autodoc. This will allow sphinx to automatically generate documentation for your code. Also make sure that ``y`` is chosen for automatically generating a makefile.

After sphinx-quickstart completes, move into the empty directory you created before. Take a look at the files and folders that sphinx has automatically created. Of special note are the following:

**index.rst**
This file is the root of all the other documentation files we are going to create. It serves as the landing page of the sphinx generated website.

**conf.py**
This is a python script containing all of the settings used by sphinx to configure itself. You can modify this file to include advanced features such as different highlighting for code snippets or changing your default webpage layout. Don't worry too much about this file for now, just know that it exists and that some features of sphinx require you to change it.

**_build directory**
This directory will contain all of the html generated code of sphinx.

If you haven't changed the setting from its default, you should also see that sphinx has created a Makefile for us. We will use this to build an html version of our documentation. 

## Building your documentation

Lets take a look more deeply into one of the files generated by sphinx. Move back to the directory you created for this project and run ``make html``. This will build a website version of your documentation and dump it in the _build directory. Take a look at the html file generated by make by opening index.html in your favorite browser. I will use firefox for demonstration:
``firefox _build/html/index.html``

## RST basics and index.rst

Now open the index.rst folder created automatically by sphinx and compare it to the html version. Notice anything? Sphinx uses a documentation formate called re-structured text (rst) by default to generate html pages. Take a look at the title of the page in index.rst: 

```
   Welcome to <Authors name>'s documentation!
   ==========================================
```
   
In rst the tittle of a page is indicated by placing a line of "=" underneath the text that defines section title. 

sub titles or subtitles of subtittles can be done with a line of "-" or "~" as follows:

```
   this is a subtitle 
   ------------------
   
   this is a subtitle of a subtitle
   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
```
   
Note: your tittle markers must be at least as long as your tittle. You also must have a blank line between your section tittle and the first line of text. For instance these titles will generate errors from sphinx:

```
   Dont do this
   =======

   Or this
   -------
   This text needs to be put after a newline.
```

Experiment by putting a few subtitles inside your index.rst file and re-run make html. What changes were made to the website?

## Directives in Sphinx

Before we move on we need to talk about directives in sphinx. Directives are special formate functions that allow us to do things we cant usually do very easily with plain text. Directives consist of a name, options, and contents:

```
.. <name of directive>::
   :<option1>:
   :<option2>:
   ...

   Contents

```


## The Toctree

Take another look at the index.rst file generated by sphinx. You should see a few lines near the middle of the file that look like this:

```
.. toctree::
   :maxdepth: 2 
   :caption: Contents:
```

These lines define a table of contents for your sphinx documentation. 





